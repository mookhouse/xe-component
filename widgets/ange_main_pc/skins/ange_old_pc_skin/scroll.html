<!--
Copyright inpleworks, Co. 
-->
{@ 
	// gallery size
	if($wi->scroll_col_count==4) $scroll_col_size = '4';
	elseif($wi->scroll_col_count==3) $scroll_col_size = '3';
	elseif($wi->scroll_col_count==2) $scroll_col_size = '2';
	elseif($wi->scroll_col_count==6) $scroll_col_size = '6';
	else $scroll_col_size = '3';
}
<!--@if($OIE)-->
{@ 
	// gallery size
	if($wi->scroll_col_count==4) $scroll_col_size = 'col-xs-6 col-sm-6 col-md-3 mg-xs-b15 mg-sm-b30';
	elseif($wi->scroll_col_count==3) $scroll_col_size = 'col-xs-6 col-sm-6 col-md-4 mg-xs-b15 mg-sm-b30';
	elseif($wi->scroll_col_count==2) $scroll_col_size = 'col-xs-6 col-sm-6 col-md-6 mg-xs-b15 mg-sm-b30';
	elseif($wi->scroll_col_count==6) $scroll_col_size = 'col-xs-6 col-sm-6 col-md-2 mg-xs-b15 mg-sm-b30';
	else $scroll_col_size = 'col-xs-6 col-sm-6 col-md-4 mg-xs-b15 mg-sm-b30';
}
<!--@end-->
<div id="xet-plus-scroll{$global['xet_plus']}" class="xet-plus-scroll">
    <div class="swiper-wrapper <!--@if($OIE)-->xet-row<!--@end-->">
		<div class="swiper-slide <!--@if($OIE)-->{$scroll_col_size}<!--@end-->" loop="$wi->document_list=>$item">	
			<div class="item <!--@if($OIE)-->equalheight<!--@end-->">	
			<div class="thumbnail" cond="$wi->show_thumbnail!='N'">
	            <div class="thumbnail-image">
				<!--@if($wi->scroll_lightbox=="Y")-->
					<!--@if($item->extra_var_name)-->
						<!--// 유투브 추출 -->
						{@ $youtube_url = $item->extra_var_name}					
						<!--@if(preg_match('/http:/', $youtube_url))-->
						{@ $_img = str_replace('http://youtu.be/', 'http://youtube.com/watch?v=', $youtube_url)}
						{@ $video_id = substr($_img, 27)}
						<!--@elseif(preg_match('/https:/', $youtube_url))-->
						{@ $_img = str_replace('https://youtu.be/', 'https://youtube.com/watch?v=', $youtube_url)}
						{@ $video_id = substr($_img, 28)}
						<!--@end-->
					<!--@elseif($item->getUploadedFiles())-->
						{@ $idx=0}
						<block loop="$item->getUploadedFiles()=>$key,$file">
							{@ 
								$_file = $file->source_filename; 
								$_exp = strtolower(substr($_file, strrpos($_file,".")));
							}
							<!--@if(in_array($_exp, array('.gif','.jpg','.jpeg','.png','.bmp')))-->
								<!--@if($idx == 0)-->
								{@ $_img = $file->uploaded_filename; }
								<!--@end-->
							<!--@end-->				
						{@ $idx++}
						</block>		
					<!--@else-->
						{@ $_img = 'widgets/xet_plus_content/skins/xet_default_skin/img/error.png' }
					<!--@end-->
				<!--@end-->	
				
				<!--@if($item->extra_var_name)-->	
					{@ $youtube_url = $item->extra_var_name}
					<!--@if($wi->thumbnail_width < 321)-->
					{@ $youtube_thumbnail_size = mqdefault}
					<!--@else-->
					{@ $youtube_thumbnail_size = maxresdefault}
					<!--@end-->
					<!--@if(preg_match('/http:/', $youtube_url))-->
					<img src="{str_replace('http://youtu.be/', 'http://img.youtube.com/vi/', $youtube_url)}/{$youtube_thumbnail_size}.jpg" style="width:100%;" alt="{strip_tags($item->getTitle())}" class="no-opacity"|cond="$wi->show_title=='Y'" />
					<!--@elseif(preg_match('/https:/', $youtube_url))-->
					<img src="{str_replace('https://youtu.be/', 'http://img.youtube.com/vi/', $youtube_url)}/{$youtube_thumbnail_size}.jpg" style="width:100%;" alt="{strip_tags($item->getTitle())}" class="no-opacity"|cond="$wi->show_title=='Y'" />
					<!--@end-->
				<!--@elseif($item->getThumbnail())-->
					<img src="{$item->getThumbnail($wi->thumbnail_width,$wi->thumbnail_height,$wi->thumbnail_type)}" alt="{strip_tags($item->getTitle())}" class="no-opacity"|cond="$wi->show_title=='Y'" />	
				<!--@else-->
					<img src="img/noimage.png" alt="{strip_tags($item->getTitle())}" style="width: 100%" class="no-opacity"|cond="$wi->show_title=='Y'" />	
				<!--@end-->	
				
					<span class="category" cond="$wi->show_category_title=='Y' && $item->category->title">{$item->category->title}</span>
					<!--@if($wi->scroll_lightbox!='Y')-->
					<span class="more"><i class="fa fa-plus" aria-hidden="true"></i></span>
					<span class="triangle-bottomright"></span>
					<!--@end-->
					
					<div class="thumbnail-image-inner">				   		
		   				<!--@if($wi->scroll_lightbox=='Y')-->
						<a href="{$_img}" class="xet-plus-lightbox" title="{strip_tags($item->getTitle())}" rel="lightbox[gallery-{$global['xet_plus']}]">
							<span class="vertical-align">
								<span class="inner middle">
									{$item->getTitle(0)}
								</span>
							</span>
						</a>									
						<!--@else-->
						<a href="{$item->getPermanentUrl()}" class="" target="_blank"|cond="$wi->new_window">
							<span class="vertical-align">
								<span class="inner middle">
									{$item->getTitle(0)}
								</span>
							</span>
						</a>
						<!--@end-->				   			
				   	</div>
				   	
				</div>
			</div>
			<div class="caption pd-15 <!--@if($wi->scroll_caption_align=='center')-->text-center<!--@end-->" cond="$wi->show_title=='Y' || $wi->show_content=='Y' || $wi->show_regdate=='Y' || $wi->show_nickname=='Y' || $wi->show_readed_count=='Y' || $wi->show_comment_count=='Y'">
				<h6 class="h6 mg-b10" cond="$wi->show_title=='Y'">
					<a href="{$item->getPermanentUrl()}" target="_blank"|cond="$wi->new_window">{$item->getTitle($wi->subject_cut_size)}</a>
					<span class="xet-plus-content-icon fs-12" cond="$wi->show_icon=='Y'">								
						<i class="xi-new" cond="(int)($item->getRegdate('YmdHis') > date('YmdHis', time()-($wi->duration_new)))"></i>
						<i class="xi-update" cond="((int)($item->get('last_update') > date('YmdHis', time()-($wi->duration_new)))) && ($item->getRegdate('YmdHis') != $item->get('last_update'))"></i>
						<i class="xi-lock" cond="$item->variables[status]=='SECRET'"></i>
					</span>
				</h6>
				<p cond="$wi->show_content=='Y'">{$item->getSummary($wi->content_cut_size)}</p>	
				<p class="fs-12" cond="$wi->show_regdate=='Y' || $wi->show_nickname=='Y' || $wi->show_readed_count=='Y' || $wi->show_comment_count=='Y'">
					<span cond="$wi->show_regdate=='Y'"><i class="fa fa-clock-o" aria-hidden="true"></i> {$item->getRegdate("M d, Y")}</span>
					<span cond="$wi->show_nickname=='Y'"><i class="fa fa-user-circle-o" aria-hidden="true"></i> {cut_str($item->getNickName(), $wi->nickname_cut_size)}</span>
					<span cond="$wi->show_readed_count=='Y' && $item->get('readed_count')"><i class="fa fa-eye" aria-hidden="true"></i> {$item->get('readed_count')}</span>
					<span cond="$wi->show_comment_count=='Y' && $item->getCommentCount()"><i class="fa fa-commenting" aria-hidden="true"></i> {$item->getCommentCount()}</span>
				</p>
			</div>
			</div>
		</div>		
	</div>
	<!--@if(!$OIE)-->
	<div class="xet-scroll-pagination text-center mg-t30"></div>	
	<div class="xet-scroll-prev hidden-xs visible-sm visible-md" cond="$wi->scroll_nav_arrow!='N' && $wi->scroll_pagination!='bullets'"></div>
	<div class="xet-scroll-next hidden-xs visible-sm visible-md" cond="$wi->scroll_nav_arrow!='N' && $wi->scroll_pagination!='bullets'"></div>	    
	<!--@end-->
</div>

<script>
jQuery(function($){	 
	<!--@if($wi->scroll_lightbox=='Y')-->
	$(document).ready(function(){	
		$('#xet-plus-scroll{$global['xet_plus']} .xet-plus-lightbox').swipebox({
			removeBarsOnMobile : false,
			hideCloseButtonOnMobile : false,
			hideBarsDelay : false,
			autoplayVideos: true,
			afterOpen: function(){
		        var $selectorClose = $("#swipebox-close");
		        var clickAction = "touchend click";		
		        $selectorClose.unbind(clickAction);
		        $selectorClose.bind(clickAction, function(event){
		          	event.preventDefault();
				  	event.stopPropagation();		
				  	$.swipebox.close();
		        });
		    }
		});	
		
	});			
	<!--@end-->
	<!--@if(!$OIE)-->

		var swiper = new Swiper('#xet-plus-scroll{$global['xet_plus']}.xet-plus-scroll', {
			speed: 400,
			autoplay: <!--@if($wi->scroll_play_time)-->{$wi->scroll_play_time*1000}<!--@else-->false<!--@end-->,
	        nextButton: '#xet-plus-scroll{$global['xet_plus']} .xet-scroll-next',
		    prevButton: '#xet-plus-scroll{$global['xet_plus']} .xet-scroll-prev',
		    pagination: '#xet-plus-scroll{$global['xet_plus']} .xet-scroll-pagination',
	        paginationClickable: true,
	        paginationType: '<!--@if($device=="mobile")-->bullets<!--@else-->{$wi->scroll_pagination}<!--@end-->',
	        slidesPerView: {$scroll_col_size},
	        slidesPerGroup: {$scroll_col_size}, 
	        slidesPerColumn: {$wi->scroll_per_column},        
	        spaceBetween: 30,
	        breakpoints: {
			    // when window width is <= 480px
			    480: {
			      slidesPerView: 1,
			      slidesPerGroup: 1, 
			      slidesPerColumn: 1,
			      spaceBetween: 15
			    },
			    // when window width is <= 768px
			    768: {
			      slidesPerView: 2,
			      slidesPerGroup: 2, 
			      slidesPerColumn: 1,
			      spaceBetween: 15
			    },
			    // when window width is <= 992px
			    992: {
			      slidesPerView: 2,
			      slidesPerGroup: 2, 
			      slidesPerColumn: 2,      
			      spaceBetween: 30
			    }
			}
	  	});    

	<!--@end-->
});
</script>